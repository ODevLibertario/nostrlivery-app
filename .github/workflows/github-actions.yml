# .github/workflows/lint.yml

name: Build
on: [push]
jobs:
  lint-common:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Install modules
        run: yarn
        working-directory: ./common
      - name: Run ESLint
        run: yarn lint
        working-directory: ./common
      - name: Pack common module
        id: pack-common
        run: |
          npm pack
        working-directory: ./common
      #- name: Publish to npm
      #  run: |
      #    echo "//registry.npmjs.org/:_authToken=${{ secrets.NPM_TOKEN }}" > ~/.npmrc
      #    npm publish --access public
      #  working-directory: ./common
  lint-company:
    runs-on: ubuntu-latest
      steps:
      - uses: actions/checkout@v2
      - name: Install modules
        run: yarn
        working-directory: ./company
      - name: Run ESLint
        run: yarn lint
        working-directory: ./company
  lint-driver: 
    runs-on: ubuntu-latest
      steps:     
      - uses: actions/checkout@v2
      - name: Install modules
        run: yarn
        working-directory: ./driver
      - name: Run ESLint
        run: yarn lint
        working-directory: ./driver
